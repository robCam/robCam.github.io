/** The MIT License (MIT) | Copyright (c) 2015 Rob Campbell | requestAnimationFrame Polyfill from http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/ */var requestAnimFrame=function(a){"use strict";return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)}}(this),RCAM=RCAM||{};RCAM.param=RCAM.param||{},RCAM.init=function(a){"use strict";function b(a){var b,c=g.createElement("tempElement");for(b in a)if(a.hasOwnProperty(b)&&void 0!==c.style[b])return a[b];c=null}function c(a){var b,c,d=g.createElement("canvas"),e=d.getContext("2d"),f="abcdefghijklmnopqrstuvwxyz0123456789";return e.font="72px monospace",b=e.measureText(f).width,e.font="72px '"+a+"', monospace",c=e.measureText(f).width,d=null,c===b?!1:c!==b?!0:void 0}function d(){var a=h.hasOwnProperty("onorientationchange"),c=h.getComputedStyle(g.documentElement,""),d=(Array.prototype.slice.call(c).join("").match(/-(moz|webkit|ms)-/)||""===c.OLink&&["","o"])[1];f.hasTouch="ontouchstart"in g,f.resizeEvent=a?"orientationchange":"resize",f.pointerStart=f.hasTouch?"touchstart":"mousedown",f.pointerMove=f.hasTouch?"touchmove":"mousemove",f.pointerEnd=f.hasTouch?"touchend":"mouseup",f.hasTouch&&(f.pointerCancel="touchcancel"),f.cssVendorPref="-"+d+"-",f.jsVendorPref=d[0].toUpperCase()+d.substr(1),f.installedFontList=i,f.transitionStart=b({transition:"transitionstart",OTransition:"oTransitionStart",MozTransition:"transitionstart",WebkitTransition:"webkitTransitionStart"}),f.transitionEnd=b({transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"}),f.animationStart=b({animation:"animationstart",Oanimation:"oAnimationStart",MozAnimation:"animationstart",WebkitAnimation:"webkitAnimationStart"}),f.animationEnd=b({animation:"animationend",Oanimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"})}function e(){d()}var f=RCAM.param,g=a.document,h=a.window,i=[],j=["Arial","Baskerville","Droid Serif","Georgia","Helvetica","Helvetica Neue","Lucida","Optima","Palatino","Thonburi","Times New Roman","Verdana"];return j.forEach(function(a){var b=c(a);b&&i.push(a)}),e}(this),RCAM.init();var RCAM=RCAM||{};RCAM.utils=function(){"use strict";function a(a,b){return new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)}function b(b,c){a(b,c)||(b.className=b.className?b.className+" "+c:c)}function c(a,b){if(a.className){var c=a.className.split(" "),d=[],e=0,f=c.length;for(e;f>e;e+=1)c[e]!==b&&d.push(c[e]);a.className=d.join(" ")}}function d(d,e){a(d,e)?c(d,e):b(d,e)}return{hasClass:a,addClass:b,removeClass:c,toggleClass:d}}();var RCAM=RCAM||{};RCAM.widgets=RCAM.widgets||{},RCAM.widgets.Button=function(a){"use strict";function b(a,d,g){return this instanceof b?(this.hoverStateStyle=d.hoverStateStyle,this.activeStateStyle=d.activeStateStyle,this.options={persistActiveState:!0,onPointerEndCallback:void 0,perimeterDelta:30},this._extend(this.options,g),this.options.persistActiveState=void 0===this.activeStateStyle?!1:this.options.persistActiveState,this.el="string"==typeof a?f.querySelector(a):a,this.bounds=this._getBounds(),this.pointerIsDown=!1,this.pointerIsInBounds=!1,this.el.addEventListener(c.pointerStart,this,!1),void e.addEventListener(c.resizeEvent,this,!1)):new b(a,d,g)}var c=RCAM.param,d=RCAM.utils,e=a.window,f=a.document;e.requestAnimFrame;return b.prototype={constructor:b,handleEvent:function(a){switch(a.type){case c.pointerStart:this._onStart(a);break;case c.pointerMove:this._onMove(a);break;case c.pointerEnd:case c.pointerCancel:this._onEnd(a);break;case c.resizeEvent:this._resize(a)}},_onStart:function(a){var b=c.hasTouch?this.el:f;this.pointerIsDown=!0,this.pointerIsInBounds=!0,d.addClass(this.el,this.hoverStateStyle),b.addEventListener(c.pointerMove,this,!1),b.addEventListener(c.pointerEnd,this,!1),b.addEventListener(c.pointerCancel,this,!1),this.el.removeEventListener(c.pointerStart,this,!1)},_onMove:function(a){if(this.pointerIsDown){var b=c.hasTouch?a.touches[0]:a;this.el.removeEventListener(c.pointerStart,this,!1),this._handleMove(b.pageX,b.pageY)}},_handleMove:function(a,b){a<this.bounds.left||a>this.bounds.right||b<this.bounds.top||b>this.bounds.bottom?(this.pointerIsInBounds=!1,d.removeClass(this.el,this.hoverStateStyle)):(this.pointerIsInBounds=!0,d.addClass(this.el,this.hoverStateStyle))},_onEnd:function(a){var b=c.hasTouch?this.el:f;this.pointerIsDown=!1,d.removeClass(this.el,this.hoverStateStyle),this.el.addEventListener(c.pointerStart,this,!1),b.removeEventListener(c.pointerEnd,this,!1),b.removeEventListener(c.pointerCancel,this,!1),b.removeEventListener(c.pointerMove,this,!1),this.options.persistActiveState&&this.pointerIsInBounds&&this.setStateActive(),this.options.onPointerEndCallback&&this.pointerIsInBounds&&this.options.onPointerEndCallback.call(this),this.pointerIsInBounds=!1,a.preventDefault(),a.stopPropagation()},_extend:function(a,b){var c;if("object"==typeof b)for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},_getBounds:function(){var a=this.options.perimeterDelta,b=(this.el.offsetHeight,this.el.getBoundingClientRect());return{top:b.top-a,right:b.right+a,bottom:b.bottom+a,left:b.left-a,width:b.right-b.left,height:b.bottom-b.top}},_resize:function(){this.bounds=this._getBounds()},setStateActive:function(){this.options.persistActiveState&&d.addClass(this.el,this.activeStateStyle)},setStateInactive:function(){this.options.persistActiveState&&d.removeClass(this.el,this.activeStateStyle)},destroy:function(){var a=c.hasTouch?this.el:f;this.el.removeEventListener(c.pointerStart,this,!1),a.removeEventListener(c.pointerMove,this,!1),a.removeEventListener(c.pointerEnd,this,!1),a.addEventListener(c.pointerCancel,this,!1)}},b}(this);var RCAM=RCAM||{};RCAM.widgets=RCAM.widgets||{},RCAM.widgets.TrayReveal=function(a){"use strict";function b(a,d){return this instanceof b?(this.options={onToggleState:void 0,onTransitionEnd:void 0},this._extend(this.options,d),this.isActive=!1,this.trayReveal="string"==typeof a?f.querySelector(a):a,this.trayRevealMask=this.trayReveal.querySelector(".tray-reveal__mask"),this.trayRevealContent=this.trayReveal.querySelector(".tray-reveal__mask__content"),this.fontList=this.trayRevealContent.querySelector(".font-list"),this._appendFontList(),void this.trayRevealContent.addEventListener(c.transitionEnd,this,!1)):new b(a,d)}var c=RCAM.param,d=RCAM.utils,e=a.window,f=a.document,g=e.requestAnimFrame;return b.prototype={constructor:b,handleEvent:function(a){switch(a.type){case c.transitionEnd:this._onTransitionEnd(a)}},_extend:function(a,b){var c;if("object"==typeof b)for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},_onTransitionEnd:function(){var a=this;this.options.onTransitionEnd&&this.options.onTransitionEnd.call(a)},_appendFontList:function(){var a=this.fontList;c.installedFontList.forEach(function(b){var c=f.createElement("li"),d=f.createTextNode(b);c.className="font-list__item",c.setAttribute("data-font",b),c.style.fontFamily=b,c.appendChild(d),a.appendChild(c)})},toggleState:function(){var a=this;g(function(){d.toggleClass(a.trayRevealMask,"tray-reveal__mask--active"),d.toggleClass(a.trayRevealContent,"tray-reveal__mask__content--active")}),this.options.onToggleState&&this.options.onToggleState.call(a),this.isActive=this.isActive?!1:!0}},b}(this);var RCAM=RCAM||{};RCAM.widgets=RCAM.widgets||{},RCAM.widgets.SlidePanel=function(a){"use strict";function b(a,c,d){return this instanceof b?(this.options={foo:void 0},this._extend(this.options,d),this.isActive=!1,this.el="string"==typeof a?e.querySelector(a):a,void(this.activeStateStyle=c)):new b(a,c,d)}var c=RCAM.utils,d=a.window,e=a.document,f=d.requestAnimFrame;return b.prototype={constructor:b,_extend:function(a,b){var c;if("object"==typeof b)for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},toggleState:function(){var a=this;f(function(){c.toggleClass(a.el,a.activeStateStyle)}),this.options.onToggleState&&this.options.onToggleState.call(a),this.isActive=this.isActive?!1:!0}},b}(this);var RCAM=RCAM||{};RCAM.widgets=RCAM.widgets||{},RCAM.widgets.PopupDialog=function(a){"use strict";function b(a,c){return this instanceof b?(this.options={onToggleState:null},this._extend(this.options,c),this.isActive=!1,void(this.el="string"==typeof a?f.querySelector(a):a)):new b(a,c)}var c=RCAM.param,d=RCAM.utils,e=a.window,f=a.document,g=e.requestAnimFrame;return b.prototype={constructor:b,handleEvent:function(a){switch(a.type){case c.transitionEnd:this._onTransitionEnd(a)}},_extend:function(a,b){var c;if("object"==typeof b)for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},_onTransitionEnd:function(){},toggleState:function(){var a=this;g(function(){d.toggleClass(a.el,"view-options--active")}),this.options.onToggleState&&this.options.onToggleState.call(a),this.isActive=this.isActive?!1:!0}},b}(this);var RCAM=RCAM||{};RCAM.dialogButtons=function(a,b,c,d){"use strict";function e(){var e,f,g,h,i,j,k,l,m,n=c.utils,o=b.querySelector(".js-font-list"),p=[].slice.call(o.querySelectorAll(".font-list__item")),q=[],r=b.querySelector(".js-view-options__paper-buttons"),s=b.querySelector(".view-options"),t=(b.querySelector(".wrapper"),[]),u=b.querySelector(".js-view-options__bottom-panel"),v=b.querySelector(".main-content"),w=function(a,c){var d=b.head||b.getElementsByTagName("head")[0],e=b.createElement("style"),f=d.querySelector(c);a&&(e.type="text/css",e.id=c.replace("#",""),e.appendChild(b.createTextNode(a))),null!==f&&f.parentNode.removeChild(f),a&&-1===a.indexOf("publisher-font")&&d.appendChild(e)},x="#theme-override",y=".main-content * { color: hsl(0, 0%, 100%) !important; } .main-header { background: hsl(0, 0%, 15%); background: -webkit-linear-gradient(90deg, hsl(0, 0%, 10%) 0%, hsl(0, 0%, 15%) 100%) !important; background: -moz-linear-gradient(90deg, hsl(0, 0%, 10%) 0%, hsl(0, 0%, 15%) 100%) !important; background: linear-gradient(0deg,  hsl(0, 0%, 10%) 0%, hsl(0, 0%, 15%) 100%) !important; }",z=".main-content * { color: hsl(40, 65%, 20%) !important; } .main-header { background: hsl(40, 35%, 60%); background: -webkit-linear-gradient(90deg, hsl(40, 35%, 75%) 0%, hsl(40, 35%, 60%) 100%) !important; background: -moz-linear-gradient(90deg, hsl(40, 35%, 75%) 0%, hsl(40, 35%, 60%) 100%) !important; background: linear-gradient(0deg,  hsl(40, 35%, 75%) 0%, hsl(40, 35%, 60%) 100%) !important;}";"true"===d.getItem("paperBlackBttnIsActive")?(w(y,x),n.addClass(s,"view-options--theme-b")):"true"===d.getItem("paperSepiaBttnIsActive")&&w(z,x),d.getItem("fontSetting")&&w('.main-content * { font-family: "'+d.getItem("fontSetting")+'" !important;}',"#custom-font"),d.getItem("fontSize")&&(v.style.fontSize=d.getItem("fontSize")+"px"),d.getItem("lineHeight")&&(v.style.lineHeight=d.getItem("lineHeight")+"px"),e=new c.widgets.Button(".js-fontsmaller",{hoverStateStyle:"view-options__bttn--hover"},{onPointerEndCallback:function(){var b=parseFloat(a.getComputedStyle(v,null).getPropertyValue("font-size")),c=parseFloat(a.getComputedStyle(v,null).getPropertyValue("line-height"));v.style.fontSize=b-2+"px",v.style.lineHeight=c-4+"px",d.setItem("fontSize",b-2),d.setItem("lineHeight",c-4)}}),f=new c.widgets.Button(".js-fontlarger",{hoverStateStyle:"view-options__bttn--hover"},{onPointerEndCallback:function(){var b=parseFloat(a.getComputedStyle(v,null).getPropertyValue("font-size")),c=parseFloat(a.getComputedStyle(v,null).getPropertyValue("line-height"));v.style.fontSize=b+2+"px",v.style.lineHeight=c+4+"px",d.setItem("fontSize",b+2),d.setItem("lineHeight",c+4)}}),g=new c.widgets.Button(".js-chosenFont",{hoverStateStyle:"view-options__bttn--fontbttn--hover"},{onPointerEndCallback:function(){k.toggleState(),l.toggleState(),m.toggleState()}}),k=new c.widgets.TrayReveal(".tray-reveal",{onTransitionEnd:function(){t.forEach(function(a){a.bounds=a._getBounds()})}}),l=new c.widgets.SlidePanel(r,"view-options__paper-buttons--active",{foobar:null}),h=new c.widgets.Button(".js-paper-white",{hoverStateStyle:"view-options__bttn--hover",activeStateStyle:"view-options__bttn--active"},{onPointerEndCallback:function(){var a=this;b.querySelector(".wrapper");t.forEach(function(b){b!==a?(b.setStateInactive(),(null===d.getItem("paperWhiteBttnIsActive")||"false"===d.getItem("paperWhiteBttnIsActive"))&&d.setItem("paperWhiteBttnIsActive",!0)):(n.removeClass(s,"view-options--theme-b"),d.setItem("paperBlackBttnIsActive",!1),d.setItem("paperWhiteBttnIsActive",!0),d.setItem("paperSepiaBttnIsActive",!1))}),w("",x),v.style.background="hsl(0, 0%, 96%)"}}),t.push(h),"true"===d.getItem("paperWhiteBttnIsActive")&&(h.setStateActive(),v.style.background="hsl(0, 0%, 96%)"),i=new c.widgets.Button(".js-paper-black",{hoverStateStyle:"view-options__bttn--black--hover",activeStateStyle:"view-options__bttn--active"},{onPointerEndCallback:function(){var a=this;b.querySelector(".wrapper");t.forEach(function(b){b!==a?(b.setStateInactive(),(null===d.getItem("paperBlackBttnIsActive")||"false"===d.getItem("paperBlackBttnIsActive"))&&d.setItem("paperBlackBttnIsActive",!0)):(n.addClass(s,"view-options--theme-b"),d.setItem("paperBlackBttnIsActive",!0),d.setItem("paperWhiteBttnIsActive",!1),d.setItem("paperSepiaBttnIsActive",!1))}),w(y,x),v.style.background="hsl(0, 0%, 6%)"}}),t.push(i),"true"===d.getItem("paperBlackBttnIsActive")&&(i.setStateActive(),v.style.background="hsl(0, 0%, 6%)"),j=new c.widgets.Button(".js-paper-sepia",{hoverStateStyle:"view-options__bttn--sepia--hover",activeStateStyle:"view-options__bttn--active"},{onPointerEndCallback:function(){var a=this;b.querySelector(".wrapper");t.forEach(function(b){b!==a?(b.setStateInactive(),(null===d.getItem("paperSepiaBttnIsActive")||"false"===d.getItem("paperSepiaBttnIsActive"))&&d.setItem("paperSepiaBttnIsActive",!0)):(n.removeClass(s,"view-options--theme-b"),d.setItem("paperSepiaBttnIsActive",!0),d.setItem("paperWhiteBttnIsActive",!1),d.setItem("paperBlackBttnIsActive",!1))}),w(z,x),v.style.background="hsl(40, 35%, 70%)"}}),t.push(j),"true"===d.getItem("paperSepiaBttnIsActive")&&(j.setStateActive(),v.style.background="hsl(40, 35%, 70%)"),m=new c.widgets.SlidePanel(u,"view-options__bottom-panel--active",{foobar:null}),p=[].slice.call(o.querySelectorAll(".font-list__item")),p.forEach(function(a){var b=new c.widgets.Button(a,{hoverStateStyle:"view-options__bttn--fontbttn--hover"},{onPointerEndCallback:function(){var b=a.dataset?a.dataset.font:a.getAttribute("data-font");w('.main-content * { font-family: "'+b+'" !important;}',"#custom-font"),d.setItem("fontSetting",b)}});q.push(b)}),o.ontouchmove=function(a){a.stopPropagation()},v.ontouchmove=function(a){a.stopPropagation()},b.addEventListener("touchmove",function(a){a.preventDefault()},!1)}return{init:e}}(this.window,this.document,this.RCAM,this.localStorage);